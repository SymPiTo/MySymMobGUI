<!doctype html>


<head>
    <title>MyIPS</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="css/myGlides.css">	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>      
    <script src="js/myLib.js"></script>

    <link href="http://allfont.net/allfont.css?fonts=dot-matrix" rel="stylesheet" type="text/css" /> 
    <link rel="stylesheet"  type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  
    <!-- <link rel="stylesheet" href="https://maxcdn.icons8.com/fonts/line-awesome/1.1/css/line-awesome-font-awesome.min.css"> -->
    

    <!--  ..............................................................  -->
    <!--   WEBSOCKET FUNKTIONEN                                           --> 
    <!--  ..............................................................  -->
    <script type='text/javascript'>
        var socket;
        var symvar = []; 

        function init() {
                // var host = 'ws://ylgsiletvcrasj6i.myfritz.net:9000'; // SET THIS TO YOUR SERVER
                var host = 'ws://192.168.178.28:9000'; // SET THIS TO YOUR SERVER
                try {
                        socket = new WebSocket(host);
                        state('WebSocket: '+socket.readyState);
                        socket.onopen    = function(msg)    {      
                                                                var a = 0;
                                                                   if(this.readyState === 1){ a = 'connected';}
                                                                   else if (this.readyState === 2){a = 'connecting';}
                                                                   else if (this.readyState === 0){a = 'not connecting';}
                                                                   else {a = 'Connection closed';}
                                                                   state(' WebSocket: '+ a); 
                                                                   keepAlive();
                                                                   led.update(true);

                                                           };

                        socket.onmessage = function(msg) { 

                                                                var jsontext = msg.data;
                                                                if(jsontext.substring(0, 6) == "REPLY:"){

                                                                    var feedback = jsontext.substr(6,jsontext.length-6) ;
                                                                    reply(feedback);
                                                                }
                                                                else if(jsontext.substring(0, 6) == "AList:"){

                                                                    var text = jsontext.substr(6,jsontext.length-6) ;
                                                                    showAList(text);
                                                                }
                                                                else if(jsontext.substring(0, 9)  == "IPSValue:"){
                                                                    //Antwort auf eine Anfrage - nur bestimmte Variable updaten
                                                                    var ipsID = "ID" + jsontext.substring(10, 5);
                                                                    var len = jsontext.length - 14;
                                                                    var ipsJsonValue = jsontext.substring(16, len);
                                                                    var IPSValue = JSON.parse(ipsJsonValue); 
                                                                    updateIPSValue(ipsID, IPSValue);
                                                                }
                                                                else{
                                                                    ips = JSON.parse(jsontext); 
                                                                    symvar = ips[0];
                                                                     //updateValues(sym);
     
                                                                }

                                                      };
                        socket.onclose  = function(msg) { 
                                                                   state('Client disconnected - status '+ this.readyState);
                                                                   //send('Client' + '*' + 'status' + '*' + 'close connection');
                                                                   cancelKeepAlive();
                                                                   
                                                           };
                        socket.onerror = function(err) {
                                                                fehler('Client' + '*' + 'status' + '*' + 'err');									 
                                                           };
                }
                catch(ex){  
                        state(ex); 
                }
                //$('msg').focus();	
        }


        function send(msg){
                var msg;

                if(!msg) { 
                        alert('Message can not be empty'); 
                        return; 
                }

                try { 
                        socket.send(msg); 
                        //cmd('Sent: '+msg); 
                } catch(ex) { 
                        state(ex); 
                }
        }

        function quit(){
                if (socket !== null) {
                        state('Client quit!');
                        socket.close();
                        socket=null;
                }
        }

        function reconnect() {
                quit();
                init();
        }


        var timerID =0;
        function keepAlive(){
                var timeout = 20000;
                if (socket.readyState == socket.OPEN) {
                        send('Client' + '*' + 'status' + '*' + 'keep Alive');
                }
                timerID = setTimeout(keepAlive, timeout); 

        }
                

        function cancelKeepAlive(){
                if (timerID) {
                        clearTimeout(timerID);

                }
        }


        function fehler(msg){
                 $('fehler').innerHTML =  msg; 
        }


        // Utilities
        function $(id){ return document.getElementById(id); }

        function state(msg){ $('state').innerHTML =  msg; }

        function cmd(msg){ $('cmd').innerHTML =  msg; }



        function close(msg){
                if (msg === doclose) {
                        quit();
                }
                else{
                }	
        }
    </script>
 
</head>

<body onload='init();'>
    <!-- .................................. Container ...............................  -->
    <div id="Container" class="Container">      
         <div id="kopfleiste" class="Top">
                <div id="TopTitle">
                        M Y I P S
                </div>
        </div>
	<script>
             var Back = new IconBtn();
             Back.create("kopfleiste", "2vh", "80vw", "Back.png");
        </script> 
        <!-- ****************************** Main Menue ********************************************  -->
	<div id="MainMenu" class="MainMenu"></div>
	<script>	
            var MenuHome = new GlideButton();
            MenuHome.create("MainMenu", "grey", "Home", "_Home_BW_web.png", "MenuStart", "","MM" );  
            var LeftMenuFP = new GlideButton();
            LeftMenuFP.create("MainMenu", "pink", "Floorplan", "_Floorplan_BW_web.png", "", "floorplan","MM" ); 
            var LeftMenuSec = new GlideButton();
            LeftMenuSec.create("MainMenu", "red", "Alarmanlage", "_AlarmAnlage_BW_web.png", "MenuSec", "", "MM" ); 
            var LeftMenuWZ = new GlideButton();
            LeftMenuWZ.create("MainMenu", "cyan", "Wohnzimmer", "_Wohnzimmer_BW_web.png", "MenuWZ", "", "MM" );  
            var LeftMenuKZ = new GlideButton();
            LeftMenuKZ.create("MainMenu", "olive", "Kinderzimmer", "_Kinderzimmer_BW_web.png", "MenuKZ","","MM" );  
            var LeftMenuSZ = new GlideButton();
            LeftMenuSZ.create("MainMenu", "sandy", "Schlafzimmer", "_Schlafzimmer_BW_web.png", "MenuSZ","","MM" ); 
            var LeftMenuK = new GlideButton();
            LeftMenuK.create("MainMenu", "midgreen", "Kueche", "_Kueche_BW_web.png", "MenuK","","MM" ); 
            var LeftMenuB = new GlideButton();
            LeftMenuB.create("MainMenu", "blue", "Balkon", "_Balkon_BW_web.png", "MenuB","","MM" ); 
            var LeftMenuMM = new GlideButton();
            LeftMenuMM.create("MainMenu", "purple", "Multimedia", "_Multimedia_BW_web.png", "MenuMultimedia" ,"","MM"); 
            var LeftMenuHz = new GlideButton();
            LeftMenuHz.create("MainMenu", "yellow", "Heizung", "_Heizung_BW_web.png", "MenuHz","","MM" ); 
            var LeftMenuRollo = new GlideButton();
            LeftMenuRollo.create("MainMenu", "brown", "Rolladen", "_Rolladen_BW_web.png", "MenuRollo","","MM" );  
            var LeftMenuNet = new GlideButton();
            LeftMenuNet.create("MainMenu", "green", "Netzwerk", "_Network_BW_web.png", "MenuNet","","MM" );  
            var MenuSecurity1 = new GlideButton();
            MenuSecurity1.create("MainMenu","cyan", "Security", "_GuestroomBW.jpg", "",  "", "MM" );  
        </script>    
            
        <!-- ********************************************* Unter Menus ***********************************************************  -->
	<!-- *********************** StartScreen  **************************  -->
	<subMenu id="SubMenuStart" class="MenuStart"></subMenu>
        <script>    
            var SubMenuWetter = new GlideButton();
            SubMenuWetter.create("SubMenuStart","grey", "Wetter", "Wetter_BW_web.png", "MainWetter","", "SM" ); 
            var SubMenuShort = new GlideButton();
            SubMenuShort.create("SubMenuStart", "grey", "ShortCuts", "Sequence_BW_web.png", "MainShorts","", "SM" ); 
        </script>
	<!-- *********************** SubMenu - Security  **************************  -->
	<subMenu id="SubMenuSec" class="MenuSec"></subMenu>
        <script>    
            var SubMenuSecCode = new GlideButton();
            SubMenuSecCode.create("SubMenuSec", "red", "Alarmanlage", "AlarmKey.png", "MainSecCode","", "SM" ); 
            var SubMenuWaterAlarm = new GlideButton();
            SubMenuWaterAlarm.create("SubMenuSec", "red", "Wasser Alarm", "FeuchteWasserMelder.png", "MainWaterAlarm","", "SM" ); 
            var SubMenuBatAlarm = new GlideButton();
            SubMenuBatAlarm.create("SubMenuSec", "red", "Battery Alarm", "BatAlarm.png", "MainBatAlarm","", "SM" ); 
        </script>
        <!-- ************************* SubMenu - Wohnzimmer **************************  -->
        <subMenu id= "SubMenuWZ" class="MenuWZ">        </subMenu>  
        <script> 
            var SubMenuHzWZ = new GlideButton();
            SubMenuHzWZ.create("SubMenuWZ", "cyan", "Heizung Wohnzimmer", "_Heizung_BW2.png", "MainHeizungWZ","", "SM" );  
            var SubMenuRolloWZ = new GlideButton();
            SubMenuRolloWZ.create("SubMenuWZ", "cyan", "Rolladen Wohnzimmer", "_Rolladen_BW_web.png", "MainRolloWZ","", "SM" ); 
            
            var SubMenuRolloWZ = new GlideButton();
            SubMenuRolloWZ.create("SubMenuWZ", "cyan", "Ceol Anlage", "DenonCeolIcon.jpg", "MainCeolWZ","", "SM" ); 
            var SubMenuTV = new GlideButton();
            SubMenuTV.create("SubMenuWZ", "cyan", "Samsung TV", "_TV_BW.png", "MainTV","", "SM" ); 
            var SubMenuRolloWZ = new GlideButton();
            SubMenuRolloWZ.create("SubMenuWZ", "cyan", "BlueRayPlayer", "BlueRay.png", "MainBlueRayWZ","", "SM" ); 
        </script>  
	<!-- *********************** SubMenu - Kinderzimmer  **************************  -->
	<subMenu id="SubMenuKZ" class="MenuKZ"></subMenu>

        <script>    
             var SubMenuHzKZ = new GlideButton();
            SubMenuHzKZ.create("SubMenuKZ", "olive", "Heizung Kinderzimmer", "_Heizung_BW2.png", "MainHzKZ","", "SM" ); 
            var SubMenuRolloKZ = new GlideButton();
            SubMenuRolloKZ.create("SubMenuKZ", "olive", "Rolladen Kinderzimmer", "_Rolladen_BW_web.png", "MainRolloKZ","", "SM" ); 
        </script>  
	<!-- ************************ SubMenu - Schlafzimmer  ************************  -->
	<subMenu id="SubMenuSZ" class="MenuSZ"></subMenu>
        <script>    
            var SubMenuHzSZ = new GlideButton();
            SubMenuHzSZ.create("SubMenuSZ", "sandy", "Heizung Schlafzimmer", "_Heizung_BW2.png", "MainHzSZ","", "SM" ); 
            var SubMenuRolloSZ = new GlideButton();
            SubMenuRolloSZ.create("SubMenuSZ", "sandy", "Rolladen Schlafzimmer", "_Rolladen_BW_web.png", "MainRolloSZ","", "SM" ); 
            var SubMenuLightSZ = new GlideButton();
            SubMenuLightSZ.create("SubMenuSZ", "sandy", "Licht Schlafzimmer", "Light_BW_web.png", "MainLightSZ","", "SM" ); 
            var SubMenuSonosZ = new GlideButton();
            SubMenuSonosZ.create("SubMenuSZ", "sandy", "Sonos", "Sonos_BW_web.png", "MainSonosSZ","", "SM" );   
        </script>  
	<!-- ************************ SubMenu - Kueche  ************************  -->
	<subMenu id="SubMenuK" class="MenuK"></subMenu>
        <script>    
            var SubMenuHzK = new GlideButton();
            SubMenuHzK.create("SubMenuK", "midgreen", "Heizung Kueche", "_Heizung_BW2.png", "MainHzK","", "SM" ); 
            var SubMenuRolloK = new GlideButton();
            SubMenuRolloK.create("SubMenuK", "midgreen", "Rolladen Kueche", "_Rolladen_BW_web.png", "MainRolloK","", "SM" ); 
            var SubMenuRezepte = new GlideButton();
            SubMenuRezepte.create("SubMenuK", "midgreen", "Rezepte", "cook_web.png", "MainRezepte","", "SM" ); 
            var SubMenuClock = new GlideButton();
            SubMenuClock.create("SubMenuK", "midgreen", "Clock", "Uhr_BW_web.png", "MainClock","", "SM" ); 
        </script> 
	<!-- ************************ SubMenu - Menu Balkon  ************************  -->
	<subMenu id="SubMenuB" class="MenuB"></subMenu>
        <script>   
            var SubMenuHzB = new GlideButton();
            SubMenuHzB.create("SubMenuB", "blue", "Heizung Balkon", "_Heizung_BW2.png", "MainHzB","", "SM" ); 
            var SubMenuRolloB = new GlideButton();
            SubMenuRolloB.create("SubMenuB", "blue", "Rolladen Balkon", "_Rolladen_BW_web.png", "MainRolloB","", "SM" ); 
        </script> 
	<!-- ************************ SubMenu - Multimedia  ************************  -->
	<subMenu id="SubMenuMedia" class="MenuMultimedia"></subMenu>	
         <script>   
            var SubMenuTV = new GlideButton();
            SubMenuTV.create("SubMenuMedia", "purple", "Samsung TV", "_TV_BW.png", "MainTV","", "SM" ); 
            var SubMenuIRadio = new GlideButton();
            SubMenuIRadio.create("SubMenuMedia", "purple", "Internet Radio", "_IRadio_BW2a.png", "MainIRadio","", "SM" ); 
            var SubMenuCD = new GlideButton();
            SubMenuCD.create("SubMenuMedia", "purple", "Musik CDs", "CD1_BW.png", "MainCD","", "SM" ); 
            var SubMenuUPNP = new GlideButton();
            SubMenuUPNP.create("SubMenuMedia", "purple", "UPnP", "upnp1.png", "MainUpnp","", "SM" );    
            var SubMenuAudio = new GlideButton();
            SubMenuAudio.create("SubMenuMedia", "purple", "Audio Books", "AudioBookLib.png", "MainAudio","", "SM" );
            var SubMenuCEOL = new GlideButton();
            SubMenuCEOL.create("SubMenuMedia", "purple", "Denon CEOL", "DenonCeolIcon.jpg", "MainCeol","", "SM" );
            var SubMenuBlueRay = new GlideButton();
            SubMenuBlueRay.create("SubMenuMedia", "purple", "BlueRay Player", "BlueRay.png", "MainBlueRay","", "SM" );
        </script>   
	<!-- ************************ SubMenu - Menue  Heizung  ************************  -->
	<subMenu id="SubMenuHz" class="MenuHz"></subMenu>
        <script>  
            var SubMenuHzAll = new GlideButton();
            SubMenuHzAll.create("SubMenuHz", "purple", "Heizung Uebersicht", "_Heizung_BW2.png", "MainHzAll","", "SM" );  
            var SubMenuHzWZ = new GlideButton();
            SubMenuHzWZ.create("SubMenuHz", "cyan", "Heizung Wohnzimmer", "_Heizung_BW2.png", "MainHeizungWZ","", "SM" );  
             var SubMenuHzKZ = new GlideButton();
            SubMenuHzKZ.create("SubMenuHz", "olive", "Heizung Kinderzimmer", "_Heizung_BW2.png", "MainHzKZ","", "SM" );
            var SubMenuHzSZ = new GlideButton();
            SubMenuHzSZ.create("SubMenuHz", "sandy", "Heizung Schlafzimmer", "_Heizung_BW2.png", "MainHzSZ","", "SM" );
            var SubMenuHzK = new GlideButton();
            SubMenuHzK.create("SubMenuHz", "midgreen", "Heizung Kueche", "_Heizung_BW2.png", "MainHzK","", "SM" ); 
        </script> 

	<!-- ************************ SubMenu -  Rolladen  ************************  -->
	<subMenu id="SubMenuRollo" class="MenuRollo"></subMenu>
        <script>  
            var SubMenuRolloAll = new GlideButton();
            SubMenuRolloAll.create("SubMenuRollo", "brown", "Rolladen Uebersicht", "_Rolladen_BW.png", "MainRolloAll","", "SM" );  
            var SubMenuRolloWZ = new GlideButton();
            SubMenuRolloWZ.create("SubMenuRollo", "cyan", "Rolladen Wohnzimmer", "_Rolladen_BW.png", "MainRolloWZ","", "SM" );  
             var SubMenuRolloKZ = new GlideButton();
            SubMenuRolloKZ.create("SubMenuRollo", "olive", "Rolladen Kinderzimmer", "_Rolladen_BW.png", "MainRolloKZ","", "SM" );
            var SubMenuRolloSZ = new GlideButton();
            SubMenuRolloSZ.create("SubMenuRollo", "sandy", "Rolladen Schlafzimmer", "_Rolladen_BW.png", "MainRolloSZ","", "SM" );
            var SubMenuRolloK = new GlideButton();
            SubMenuRolloK.create("SubMenuRollo", "red", "Rolladen Kueche", "_Rolladen_BW.png", "MainRolloK","", "SM" ); 
            var SubMenuRolloB = new GlideButton();
            SubMenuRolloB.create("SubMenuRollo", "blue", "Rolladen Balkon", "_Rolladen_BW.png", "MainRolloK","", "SM" ); 
        </script> 
	<!-- ************************ Sub Menu Netzwerk  ************************  -->
	<subMenu id="SubMenuNet" class="MenuNet"></subMenu>
        <script>   
            var SubMenuWSS = new GlideButton();
            SubMenuWSS.create("SubMenuNet", "midgreen", "WSS Server", "WSS.png", "","MainWSS", "SM" ); 
            var SubMenuWSS = new GlideButton();
            SubMenuWSS.create("SubMenuNet", "midgreen", "WSS Server", "WSS.png", "MainNet","", "SM" ); 
        </script>

        <!-- ************************ SubMenu Ende  ************************  -->
         <div id="Fussleiste" class="Bottom">
                <div id="TopTitle">
                        M Y I P S
                </div>
        </div>
    <!-- ************************** Container Ende  ************************** -->
    </div>
</body>
</html>

